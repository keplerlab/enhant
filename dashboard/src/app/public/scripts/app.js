(function() {
  var template = Handlebars.template, templates = Handlebars.templates = Handlebars.templates || {};
templates['dashboard'] = template({"1":function(container,depth0,helpers,partials,data) {
    return "        <div class=\"section recording\"></div>\n\n";
},"3":function(container,depth0,helpers,partials,data) {
    return "        <div class=\"section bookmark has-shadow\">\n            <div class=\"row\">\n                <div class=\"col-xs-12 has-padding\">\n                    <div class=\"row heading\">\n                        <div class=\"col-xs-3\">\n                             <span class=\"cell-text\">Bookmarks</span>\n                        </div>\n                    </div>\n\n                    <div class=\"table-responsive\" style=\"margin-top:2%;\">\n                        <table class=\"table table-striped\">\n                        <tbody class=\"bookmark-data-tbody\">\n                        </tbody>\n                        </table>\n                    </div>\n                </div>\n            </div>\n        </div>\n";
},"5":function(container,depth0,helpers,partials,data) {
    return "       <div class=\"section images has-shadow\">\n            <div class=\"row\">\n                <div class=\"col-xs-12 has-padding\">\n                    <div class=\"row heading\">\n                        <div class=\"col-xs-3\">\n                             <span class=\"cell-text\">Captured Moments</span>\n                        </div>\n                    </div>\n                    <div class=\"clearfix capture-moments-data\" style=\"margin-top:2%;\">\n                    </div>\n                </div>\n            </div>\n        </div>\n";
},"7":function(container,depth0,helpers,partials,data) {
    return "        <div class=\"section\">\n            <div class=\"clearfix\">\n                <div class=\"col-xs-6 notes has-shadow\" style=\"height:196px;\">\n                    <div class=\"data-container has-padding\">\n                        <div class=\"row heading\">\n                            <div class=\"col-xs-3\">\n                                <span class=\"cell-text\">Notes</span>\n                            </div>\n                        </div>\n                        <div class=\"table-responsive\" style=\"margin-top:2%;\">\n                        <table class=\"table table-striped\">\n                        <tbody class=\"notes-data-tbody\">\n                        </tbody>\n                        </table>\n                    </div>\n                    </div>\n                </div>\n                <div class=\"col-xs-6 questions has-shadow\" style=\"height:196px;\">\n                    <div class=\"data-container has-padding\">\n                        <div class=\"row heading\">\n                            <div class=\"col-xs-3\">\n                                <span class=\"cell-text\">Questions</span>\n                            </div>\n                        </div>\n                        <div class=\"table-responsive\" style=\"margin-top:2%;\">\n                        <table class=\"table table-striped\">\n                        <tbody class=\"questions-data-tbody\">\n                        </tbody>\n                        </table>\n                    </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n";
},"9":function(container,depth0,helpers,partials,data) {
    var stack1, alias1=depth0 != null ? depth0 : (container.nullContext || {}), lookupProperty = container.lookupProperty || function(parent, propertyName) {
        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {
          return parent[propertyName];
        }
        return undefined
    };

  return ((stack1 = lookupProperty(helpers,"if").call(alias1,((stack1 = (depth0 != null ? lookupProperty(depth0,"context") : depth0)) != null ? lookupProperty(stack1,"notes") : stack1),{"name":"if","hash":{},"fn":container.program(10, data, 0),"inverse":container.noop,"data":data,"loc":{"start":{"line":165,"column":8},"end":{"line":183,"column":15}}})) != null ? stack1 : "")
    + ((stack1 = lookupProperty(helpers,"if").call(alias1,((stack1 = (depth0 != null ? lookupProperty(depth0,"context") : depth0)) != null ? lookupProperty(stack1,"questions") : stack1),{"name":"if","hash":{},"fn":container.program(12, data, 0),"inverse":container.noop,"data":data,"loc":{"start":{"line":184,"column":8},"end":{"line":202,"column":15}}})) != null ? stack1 : "");
},"10":function(container,depth0,helpers,partials,data) {
    return "        <div class=\"section notes has-shadow\">\n            <div class=\"row\">\n                <div class=\"col-xs-12 has-padding\">\n                    <div class=\"row heading\">\n                        <div class=\"col-xs-3\">\n                             <span class=\"cell-text\">Notes</span>\n                        </div>\n                    </div>\n                    <div class=\"table-responsive\" style=\"margin-top:2%;\">\n                        <table class=\"table table-striped\">\n                        <tbody class=\"notes-data-tbody\">\n                        </tbody>\n                        </table>\n                    </div>\n                </div>\n            </div>\n        </div>\n";
},"12":function(container,depth0,helpers,partials,data) {
    return "        <div class=\"section questions has-shadow\">\n            <div class=\"row\">\n                <div class=\"col-xs-12 has-padding\">\n                    <div class=\"row heading\">\n                        <div class=\"col-xs-3\">\n                             <span class=\"cell-text\">Questions</span>\n                        </div>\n                    </div>\n                    <div class=\"table-responsive\" style=\"margin-top:2%;\">\n                        <table class=\"table table-striped\">\n                        <tbody class=\"questions-data-tbody\">\n                        </tbody>\n                        </table>\n                    </div>\n                </div>\n            </div>\n        </div>\n";
},"14":function(container,depth0,helpers,partials,data) {
    return "        <div class=\"section outliers has-shadow\">\n            <div class=\"row\">\n                <div class=\"col-xs-12 has-padding\">\n                    <div class=\"row heading\">\n                        <div class=\"col-xs-3\">\n                             <span class=\"cell-text\">Sentiment Outliers\n                        </div>\n                    </div>\n                    <div class=\"table-responsive\" style=\"margin-top:2%;\">\n                        <table class=\"table table-striped\">\n                        <tbody class=\"outliers-data-tbody\">\n                        </tbody>\n                        </table>\n                    </div>\n                </div>\n            </div>\n        </div>\n";
},"compiler":[8,">= 4.3.0"],"main":function(container,depth0,helpers,partials,data) {
    var stack1, alias1=depth0 != null ? depth0 : (container.nullContext || {}), lookupProperty = container.lookupProperty || function(parent, propertyName) {
        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {
          return parent[propertyName];
        }
        return undefined
    };

  return "<style>\n    .card{\n        height: 296px;\n        margin-left: 6%;\n    }\n\n    .card-cell{\n        margin-top: 32px;\n    }\n\n    .cell-text{\n        font-size: 20px;\n    }\n\n    .section{\n        margin-top: 2%;\n    }\n\n    .has-padding{\n        padding: 2%;\n    }\n</style>\n\n<div class=\"row section\">\n    <div class=\"col-xs-3 has-shadow card text-center\">\n        <div class=\"row card-cell\">\n            <span class=\"cell-text\">Call Duration</span>\n        </div>\n        <div class=\"row card-cell\">\n            <img width=\"112\" height=\"112\" src=\"public/img/clock.svg\">\n        </div>\n\n         <div class=\"row card-cell\">\n            <span class=\"cell-text\" id=\"call-duration\">45 sec</span>\n        </div>\n    </div>\n    <div class=\"col-xs-3 has-shadow card text-center\">\n        <div class=\"row card-cell\">\n            <span class=\"cell-text\">Average Sentiment</span>\n        </div>\n        <div class=\"row card-cell\">\n            <img width=\"112\" height=\"112\" src=\"public/img/satisfied.svg\">\n        </div>\n    </div>\n    <div class=\"col-xs-3 has-shadow card text-center\">\n        <div class=\"row card-cell\">\n            <span class=\"cell-text\">Average Engagement</span>\n        </div>\n        <div class=\"row card-cell\">\n            <img width=\"112\" height=\"112\" src=\"public/img/engagement.svg\">\n        </div>\n\n         <div class=\"row card-cell\">\n            <span class=\"cell-text\" id=\"call-duration\">80%</span>\n        </div>\n    </div>\n\n\n</div>\n\n<div class=\"clearfix section has-shadow\">\n    <div class=\"col-xs-12 meeting-data-container has-padding\">\n        <div class=\"meeting-info\">\n            <div class=\"row\">\n                <div class=\"col-xs-3\">\n                    <span class=\"cell-text\">Meeting</span>\n                </div>\n            </div>\n\n            <div class=\"row\" style=\"margin-top: 2%;\">\n                <div class=\"col-xs-3\">\n                    <span class=\"cell-text\" id=\"meeting-id\">ID: </span>\n                </div>\n                <div class=\"col-xs-3\">\n                    <span class=\"cell-text\" id=\"meeting-date\">Date: </span>\n                </div>\n                <div class=\"col-xs-3\">\n                    <span class=\"cell-text\" id=\"meeting-time\">Start Time: </span>\n                </div>\n                <div class=\"col-xs-3\">\n                    <span class=\"cell-text\" id=\"meeting-duration\">Duration: </span>\n                </div>\n            </div>\n        </div>\n\n"
    + ((stack1 = lookupProperty(helpers,"if").call(alias1,((stack1 = (depth0 != null ? lookupProperty(depth0,"context") : depth0)) != null ? lookupProperty(stack1,"recording") : stack1),{"name":"if","hash":{},"fn":container.program(1, data, 0),"inverse":container.noop,"data":data,"loc":{"start":{"line":86,"column":8},"end":{"line":89,"column":15}}})) != null ? stack1 : "")
    + "\n"
    + ((stack1 = lookupProperty(helpers,"if").call(alias1,((stack1 = (depth0 != null ? lookupProperty(depth0,"context") : depth0)) != null ? lookupProperty(stack1,"bookmark") : stack1),{"name":"if","hash":{},"fn":container.program(3, data, 0),"inverse":container.noop,"data":data,"loc":{"start":{"line":91,"column":8},"end":{"line":110,"column":15}}})) != null ? stack1 : "")
    + "\n"
    + ((stack1 = lookupProperty(helpers,"if").call(alias1,((stack1 = (depth0 != null ? lookupProperty(depth0,"context") : depth0)) != null ? lookupProperty(stack1,"images") : stack1),{"name":"if","hash":{},"fn":container.program(5, data, 0),"inverse":container.noop,"data":data,"loc":{"start":{"line":112,"column":8},"end":{"line":126,"column":15}}})) != null ? stack1 : "")
    + "    \n    \n"
    + ((stack1 = (lookupProperty(helpers,"CheckIfbothTrue")||(depth0 && lookupProperty(depth0,"CheckIfbothTrue"))||container.hooks.helperMissing).call(alias1,((stack1 = (depth0 != null ? lookupProperty(depth0,"context") : depth0)) != null ? lookupProperty(stack1,"notes") : stack1),((stack1 = (depth0 != null ? lookupProperty(depth0,"context") : depth0)) != null ? lookupProperty(stack1,"questions") : stack1),{"name":"CheckIfbothTrue","hash":{},"fn":container.program(7, data, 0),"inverse":container.program(9, data, 0),"data":data,"loc":{"start":{"line":129,"column":8},"end":{"line":203,"column":28}}})) != null ? stack1 : "")
    + "\n"
    + ((stack1 = lookupProperty(helpers,"if").call(alias1,((stack1 = (depth0 != null ? lookupProperty(depth0,"context") : depth0)) != null ? lookupProperty(stack1,"sentiment_outliers") : stack1),{"name":"if","hash":{},"fn":container.program(14, data, 0),"inverse":container.noop,"data":data,"loc":{"start":{"line":205,"column":8},"end":{"line":223,"column":15}}})) != null ? stack1 : "")
    + "    </div>\n</div>\n\n\n<script>\n\n    function generateMeetingDate(start_time){\n        var date = new Date(start_time);\n        var formatted_months = (\"0\" + (date.getMonth()+1)).slice(-2).toString();\n        var formatted_yy = (\"0\" + date.getFullYear()).slice(-4).toString();\n        var formatted_dd = (\"0\" + date.getDate()).slice(-2).toString();\n\n        var formatted_hh = (\"0\" + date.getHours()).slice(-2).toString();\n        var formatted_mm = (\"0\" + date.getMinutes()).slice(-2).toString();\n\n        return {\n            \"date\" : formatted_yy + \"/\" + formatted_months + \"/\" + formatted_dd,\n            \"time\": formatted_hh + \":\" + formatted_mm\n        }\n    }\n\n    function getMeetingDuration(start_time, end_time){\n        var diff = end_time - start_time;\n        var ms = diff % 1000;\n        diff = (diff - ms) / 1000;\n        var ss = diff % 60;\n        diff = (diff - ss) / 60;\n        var mm = diff % 60;\n        diff = (diff - mm) / 60;\n        var hh = diff % 24;\n        days = (diff - hh) / 24;\n\n        var formatted_hh = (\"0\" + hh).slice(-2).toString();\n        var formatted_mm = (\"0\" + mm).slice(-2).toString();\n        var formatted_ss = (\"0\" + ss).slice(-2).toString();\n        var formatted_ms = (\"0\" + ms + \"0\").slice(-3).toString();\n\n        return formatted_hh + \":\" + formatted_mm + \":\" + formatted_ss;\n    }\n\n    function updateMeetingData(zip){\n        var meeting_id = zip.meeting_id;\n        var start_time_data = generateMeetingDate(zip.start_time);\n        var meeting_date = start_time_data.date;\n        var meeting_start_time = start_time_data.time;\n        var meeting_duration = getMeetingDuration(zip.start_time, zip.end_time);\n\n        $('#meeting-id').text(\"ID: \" + meeting_id);\n        $('#meeting-date').text(\"Date: \" + meeting_date);\n        $('#meeting-time').text(\"Start Time: \" + meeting_start_time);\n        $('#meeting-duration').text(\"Duration: \" + meeting_duration);\n    }\n\n    function updateBookmarks(zip){\n        var data = zip.notes.filter(function(obj){return obj[\"type\"] == \"bookmark\"});\n\n        var bookmark_html = \"\";\n        data.forEach(function(obj){\n\n            var bookmark_arr = obj.content;\n            var row_html = \"\";\n\n            var host_transcription = bookmark_arr.filter(function(d){return d[\"origin\"] == \"host\"});\n            var guest_transcription = bookmark_arr.filter(function(d){return d[\"origin\"] == \"guest\"});\n\n            if (!host_transcription.length && !guest_transcription.length){\n\n                var row_data = bookmark_arr[0];\n\n                row_html = \"<tr>\" +\n                    \"<td>\" + row_data.content + \"</td>\" +\n                    \"<td>\" + getMeetingDuration(zip.start_time, obj.event_time)+ \"</td></tr>\"; \n                \n                bookmark_html += row_html;\n            \n            }\n            else{\n\n                var host_final = \"Host: \"; \n                var guest_final = \"Guest: \";\n\n                host_transcription.forEach(function(hd){\n                    host_final += hd.content;\n                });\n\n                guest_transcription.forEach(function(gd){\n                   guest_final += gd.content;\n                });\n\n                var final_bookmark_text = \"\";\n\n                if (host_transcription.length){\n                    final_bookmark_text += host_final;\n                    final_bookmark_text += \"<br>\";\n                }\n                if (guest_transcription.length){\n                    final_bookmark_text += guest_final;\n                }\n\n                row_html += \"<tr>\" +\n                    \"<td>\" + final_bookmark_text + \"</td>\" +\n                    \"<td>\" + getMeetingDuration(zip.start_time, obj.event_time)+ \"</td></tr>\";\n\n                bookmark_html += row_html;\n\n            }\n        });\n\n        $('.bookmark-data-tbody').html(bookmark_html);\n\n    }\n\n    function updateNotes(zip){\n        var data = zip.notes.filter(function(obj){return obj[\"type\"] == \"notes\"});\n\n        data.forEach(function(d){\n            var row_html = \"<tr>\" +\n                    \"<td>\" + d.content + \"</td>\" +\n                    \"<td>\" + getMeetingDuration(zip.start_time, d.event_time)+ \"</td></tr>\";\n            \n            $('.notes-data-tbody').html(row_html);\n        });\n    }\n\n    function updateCapturedImages(zip){\n        var data = zip.notes.filter(function(obj){return obj[\"type\"] == \"image\"});\n\n        data.forEach(function(d){\n            var html = \"<div class='col-md-3 has-shadow' style='margin-left:5%'>\" +\n                \"<div><img style='max-width:100%;max-height:100%' src='\" + d.content + \"'>\" +\n                \"</div>\" +\n                \"<div class='text-center has-padding' style='margin-top:5%'>\" + getMeetingDuration(zip.start_time, d.event_time) +\n                \"</div>\"; \n\n            $('.capture-moments-data').append(html);\n        });\n    }\n\n    function updateQuestions(zip){\n        var data = zip.questionsAsked.questionsAsked;\n\n        data.forEach(function(d){\n            var row_html = \"<tr>\" +\n                    \"<td>\" + d + \"</td>\" + \n                    \"</tr>\";\n            \n            $('.questions-data-tbody').append(row_html);\n                \n        });\n    }\n\n    function updateSentimentOutliers(zip){\n        var highSentimentOutliers = zip.highSentimentSentence.highSentimentSentence;\n        var lowSentimentOutliers = zip.lowSentimentSentence.lowSentimentSentence;\n\n        var sentiment_outlier_html = \"\";\n\n        lowSentimentOutliers.forEach(function(d){\n\n            var row_html = \"<tr>\" +\n                    \"<td>\" + d[1] + \"</td>\" + \n                    \"</tr>\";\n            \n            $('.outliers-data-tbody').append(row_html);\n\n        });\n\n        highSentimentOutliers.forEach(function(d){\n\n            var row_html = \"<tr>\" +\n                    \"<td>\" + d[1] + \"</td>\" + \n                    \"</tr>\";\n            \n            $('.outliers-data-tbody').append(row_html);\n\n        });\n    }\n\n    window.addEventListener(\"dashboard-data\", function(evt){\n        var data = evt.detail;\n\n        console.log(\" dashboard data : \", data);\n\n        var zip_data = data.zip;\n        var recording_data = data.recording;\n\n        if (zip_data){\n            updateMeetingData(zip_data);\n            updateBookmarks(zip_data);\n            updateCapturedImages(zip_data);\n            updateNotes(zip_data);\n            updateQuestions(zip_data);\n            updateSentimentOutliers(zip_data);\n        }\n\n    });\n</script>";
},"useData":true});
templates['upload'] = template({"compiler":[8,">= 4.3.0"],"main":function(container,depth0,helpers,partials,data) {
    return "<style>\n    .file-upload{\n        color: #1E90FF;\n        border: 2px solid #1E90FF;\n        padding: 5px;\n    }\n\n    #file-zip, #file-recording{\n        opacity: 0;\n\n        height: 0.1px;\n        z-index: -1;\n    }\n\n    .upload-container{\n        margin-top: 1%;\n        width: 90%;\n        height: 312px;\n        border-radius: 5px;\n    }\n\n    .upload-container .heading{\n        margin-top: 40px;\n        \n    }\n    .upload-files{\n        margin-top: 20px;\n    }\n\n    .custom-btn{\n        background-color:  #1E90FF;\n        color: white;\n        border: 2px solid #1E90FF;\n        border-radius: 5px;\n        padding: 5px;\n    }\n\n    .upload-el{\n         margin-top: 26px;\n    }\n\n\n</style>\n\n<div class=\"upload-container has-shadow col-md-10\">\n   <div class=\"heading\">\n       <h4>Upload meeting data to view</h4>\n   </div>\n\n    <div class=\"upload-files\">\n        <div class=\"upload-el\">\n            <input type=\"file\" id=\"file-zip\" name=\"file-zip\" multiple />\n            <label for=\"file-zip\" class=\"file-upload\">\n                <span>Select meeting data (.zip)</span>\n                <img src=\"public/img/upload_icon.svg\">\n            </label>\n        </div>\n\n        <div class=\"upload-el\">\n            <input type=\"file\" id=\"file-recording\" name=\"file-recording\" multiple />\n            <label for=\"file-recording\" class=\"file-upload\">\n                <span>Select recording (.mp4, .flac)</span>\n                <img src=\"public/img/upload_icon.svg\">\n            </label>\n        </div>\n\n        <div class=\"upload-el\">\n            <button onclick=\"uploadSubmit();\" class=\"custom-btn\">View meeting<img style=\"margin-left:8px;\" src=\"public/img/next_icon.svg\"></button>\n        </div>\n       \n    </div>\n</div>\n<script src=\"public/scripts/jszip.js\"></script>\n<script>\n\n    var ZIP_DATA = {};\n    var RECORDING_DATA = {\n        url: null,\n        type: null\n    };\n\n    // add js zip code here\n    function handleZipUpload(f){\n        JSZip.loadAsync(f).then(function(zip){\n\n            zip.forEach(function(file){\n\n                var name_arr = file.split(\"/\");\n                if (name_arr.length > 1){\n                    var fileName = name_arr[name_arr.length - 1];\n                    if (fileName == \"processed.json\"){\n\n                        zip.file(file).async(\"text\").then(function(data){\n                            var json = JSON.parse(data);\n                            ZIP_DATA = json;\n                        });\n                    }\n                }\n            })\n        });\n    };\n\n    function updateRecordingURL(file){\n        RECORDING_DATA.url =  URL.createObjectURL(file);\n        RECORDING_DATA.type = file.type;\n    };\n\n    $('#file-zip').on(\"change\", function(evt){\n\n        if (evt.target.files.length){\n            var file = evt.target.files[0];\n\n            handleZipUpload(file);\n\n        };\n    });\n\n    $('#file-recording').on(\"change\", function(evt){\n\n        if (evt.target.files.length){\n            var file = evt.target.files[0];\n\n            updateRecordingURL(file);\n        };\n\n    });\n\n\n    function uploadSubmit(){\n\n        // file to dashboard handlebar\n        var event = new CustomEvent(\"dashboard\", {\n            detail: {zip: ZIP_DATA, recording: RECORDING_DATA}\n        });\n\n        window.dispatchEvent(event);\n    }\n</script>\n";
},"useData":true});
})();